<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme & Currency Example - SkillShare Local</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Theme CSS -->
    <link rel="stylesheet" href="assets/css/theme.css">
    <link rel="stylesheet" href="assets/css/style.css">
    
    <!-- Theme Initialization (Before page renders) -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            let theme = savedTheme;
            
            if (theme === 'auto') {
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                theme = prefersDark ? 'dark' : 'light';
            }
            
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
    
    <!-- Preferences JS -->
    <script src="assets/js/preferences.js"></script>
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <!-- Header -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h1 class="h3 mb-0">
                            <i class="fas fa-palette"></i> Theme & Currency Example
                        </h1>
                        <div>
                            <button onclick="toggleTheme()" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-moon"></i> Toggle Theme
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="mb-0">
                            This page demonstrates the theme switching and currency formatting features.
                            Try changing the theme or currency below to see it in action!
                        </p>
                    </div>
                </div>

                <!-- Quick Controls -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h2 class="h5 mb-0">
                            <i class="fas fa-sliders-h"></i> Quick Controls
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <!-- Theme Selector -->
                            <div class="col-md-6">
                                <label class="form-label">
                                    <i class="fas fa-adjust"></i> Theme
                                </label>
                                <select id="quickTheme" class="form-select">
                                    <option value="light">Light</option>
                                    <option value="dark">Dark</option>
                                    <option value="auto">Auto (System)</option>
                                </select>
                            </div>
                            
                            <!-- Currency Selector -->
                            <div class="col-md-6">
                                <label class="form-label">
                                    <i class="fas fa-coins"></i> Currency
                                </label>
                                <select id="quickCurrency" class="form-select">
                                    <option value="GBP">£ GBP - British Pound</option>
                                    <option value="USD">$ USD - US Dollar</option>
                                    <option value="EUR">€ EUR - Euro</option>
                                    <option value="CAD">C$ CAD - Canadian Dollar</option>
                                    <option value="AUD">A$ AUD - Australian Dollar</option>
                                    <option value="JPY">¥ JPY - Japanese Yen</option>
                                    <option value="INR">₹ INR - Indian Rupee</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sample Prices -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h2 class="h5 mb-0">
                            <i class="fas fa-tag"></i> Sample Prices
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="text-center p-3 border rounded">
                                    <h3 class="h6 text-muted">Beginner Course</h3>
                                    <p class="h4 mb-0" data-amount="15">£15.00</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center p-3 border rounded">
                                    <h3 class="h6 text-muted">Workshop</h3>
                                    <p class="h4 mb-0" data-amount="25">£25.00</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center p-3 border rounded">
                                    <h3 class="h6 text-muted">Advanced Course</h3>
                                    <p class="h4 mb-0" data-amount="50">£50.00</p>
                                </div>
                            </div>
                        </div>
                        <div class="alert alert-info mt-3 mb-0">
                            <i class="fas fa-info-circle"></i>
                            Prices automatically update when you change currency!
                        </div>
                    </div>
                </div>

                <!-- Toast Demo -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h2 class="h5 mb-0">
                            <i class="fas fa-bell"></i> Toast Notifications
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="d-flex gap-2 flex-wrap">
                            <button onclick="showToast('Operation successful!', 'success')" class="btn btn-success">
                                <i class="fas fa-check"></i> Success Toast
                            </button>
                            <button onclick="showToast('Something went wrong!', 'error')" class="btn btn-danger">
                                <i class="fas fa-times"></i> Error Toast
                            </button>
                            <button onclick="showToast('Please be careful!', 'warning')" class="btn btn-warning">
                                <i class="fas fa-exclamation-triangle"></i> Warning Toast
                            </button>
                            <button onclick="showToast('Here is some information.', 'info')" class="btn btn-info">
                                <i class="fas fa-info-circle"></i> Info Toast
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Theme Variables Demo -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h2 class="h5 mb-0">
                            <i class="fas fa-code"></i> Theme Variables in Action
                        </h2>
                    </div>
                    <div class="card-body">
                        <p>These elements use CSS variables and automatically adapt to the theme:</p>
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="p-3" style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px;">
                                    <p class="mb-2" style="color: var(--text-primary);">
                                        <strong>Primary Text</strong>
                                    </p>
                                    <p class="mb-0" style="color: var(--text-secondary); font-size: 0.9rem;">
                                        Secondary text using CSS variables
                                    </p>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="p-3" style="background: var(--bg-hover); border: 1px solid var(--border-light); border-radius: 8px;">
                                    <button class="btn w-100" style="background: var(--color-primary); color: var(--text-inverse); border: none;">
                                        <i class="fas fa-heart"></i> Primary Button
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="mt-3">
                            <h3 class="h6">Form Elements:</h3>
                            <input type="text" class="form-control mb-2" placeholder="Type something...">
                            <select class="form-select mb-2">
                                <option>Select an option</option>
                                <option>Option 1</option>
                                <option>Option 2</option>
                            </select>
                            <textarea class="form-control" rows="2" placeholder="Textarea example"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Code Examples -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h2 class="h5 mb-0">
                            <i class="fas fa-book"></i> Code Examples
                        </h2>
                    </div>
                    <div class="card-body">
                        <h3 class="h6">Format a price:</h3>
                        <pre style="background: var(--code-bg); color: var(--text-primary); padding: 1rem; border-radius: 4px; border: 1px solid var(--border-color);"><code>const price = formatPrice(25);
console.log(price); // Output depends on selected currency</code></pre>

                        <h3 class="h6 mt-3">Use theme variables in CSS:</h3>
                        <pre style="background: var(--code-bg); color: var(--text-primary); padding: 1rem; border-radius: 4px; border: 1px solid var(--border-color);"><code>.my-element {
    background: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}</code></pre>

                        <h3 class="h6 mt-3">Auto-update prices:</h3>
                        <pre style="background: var(--code-bg); color: var(--text-primary); padding: 1rem; border-radius: 4px; border: 1px solid var(--border-color);"><code>&lt;span data-amount="25"&gt;Price updates automatically&lt;/span&gt;</code></pre>
                    </div>
                </div>

                <!-- Current Settings -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h2 class="h5 mb-0">
                            <i class="fas fa-cog"></i> Current Settings
                        </h2>
                    </div>
                    <div class="card-body">
                        <table class="table table-sm">
                            <tbody>
                                <tr>
                                    <td><strong>Current Theme:</strong></td>
                                    <td id="currentTheme">-</td>
                                </tr>
                                <tr>
                                    <td><strong>System Theme:</strong></td>
                                    <td id="systemTheme">-</td>
                                </tr>
                                <tr>
                                    <td><strong>Current Currency:</strong></td>
                                    <td id="currentCurrency">-</td>
                                </tr>
                                <tr>
                                    <td><strong>Currency Symbol:</strong></td>
                                    <td id="currencySymbol">-</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <button onclick="updateCurrentSettings()" class="btn btn-sm btn-outline-secondary">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                    </div>
                </div>

                <!-- Back Link -->
                <div class="text-center mb-4">
                    <a href="settings.php" class="btn btn-primary">
                        <i class="fas fa-arrow-left"></i> Back to Settings
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Page-specific JavaScript -->
    <script>
        // Initialize controls
        document.addEventListener('DOMContentLoaded', function() {
            // Set current values
            document.getElementById('quickTheme').value = getPreferredTheme();
            document.getElementById('quickCurrency').value = getPreferredCurrency();
            
            // Update current settings display
            updateCurrentSettings();
            
            // Handle theme change
            document.getElementById('quickTheme').addEventListener('change', function() {
                setPreferredTheme(this.value);
                showToast('Theme changed to: ' + this.value, 'success');
                updateCurrentSettings();
            });
            
            // Handle currency change
            document.getElementById('quickCurrency').addEventListener('change', function() {
                setPreferredCurrency(this.value);
                updateAllPrices();
                showToast('Currency changed to: ' + this.value, 'success');
                updateCurrentSettings();
            });
        });

        // Update current settings display
        function updateCurrentSettings() {
            document.getElementById('currentTheme').textContent = getPreferredTheme();
            document.getElementById('systemTheme').textContent = getSystemTheme();
            document.getElementById('currentCurrency').textContent = getPreferredCurrency();
            document.getElementById('currencySymbol').textContent = getCurrencySymbol();
        }
    </script>
</body>
</html>
